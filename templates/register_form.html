{% extends 'base.html' %}
{% block content %}

<h1>New User Registration</h1>

<form id="registrationform">
    <label>Email: <input type="text" id="email" name="email"><br><br></label>
    <label>Password: <input type="text" name="password"><br><br></label>
    <label>Age: <input type="number" min=0 name="age"><br><br></label>
    <label>Zipcode: <input type="number" min=0 name="zipcode"><br><br></label>
    <label><input type="submit" value="Register"></label>
</form>
<script>
    function showEmailAlert(result) {
        if (result == "True") {
            alert("This email is already registered.")
        }
        else {
            // var email = {
            //     "email": $("#email").val()
            // };
            console.log("HELLLLLOOOOOOOOOO")
            var payload = $("#registrationform").serialize()
            console.log(payload)
            $.post("/register-confirmation", 
                    payload 
                    );
            }
        }
    

    function checkEmail(evt) {
        evt.preventDefault();

        var email = {
            "email": $("#email").val()
        };
            
        $.get("/user_id_check", 
                email, 
                showEmailAlert
                );
    }

    $("#registrationform").on("submit", checkEmail);

</script>
{% endblock %}